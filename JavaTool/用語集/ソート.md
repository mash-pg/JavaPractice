
```java
// 優先度が高い順 → 期限が早い順
todos.sort(
    Comparator.comparing(Todo::getPriority).reversed()
              .thenComparing(Todo::getDueDate)
);
```

```java
public class TodoService {
	private final TodoRepository todoRepository;
	//コンストラクタインジェクション
	public TodoService (TodoRepository todoRepository){
		this.todoRepository = todoRepository;
	}
	// 優先度が高い順 → 期限が早い順
	public List<Todo> getSortedTodos(){
		//findAll()はListで受け取る。ジェネリクスはTodoで受け取ることができる。
		List<Todo> todos = todoRepository.findAll();
		todos.sort(
			//よく書かれているもの
			/*
				1.getPriorityを逆順で処理する
				2.getPriorityの値が同じの場合は、getDueDateを降順にする
			*/
		    Comparator.comparing(Todo::getPriority).reversed()
		              .thenComparing(Todo::getDueDate)
		);
		//戻り値Listを忘れずに
		return todos;
	}
}

```

```java

public class TodoService {
	private final TodoRepository todoRepository;
	//コンストラクタインジェクション
	public TodoService (TodoRepository todoRepository){
		this.todoRepository = todoRepository;
	}
	// 優先度が高い順 → 期限が早い順
	public List<Todo> getSortedTodos(){
		//findAll()はListで受け取る。ジェネリクスはTodoで受け取ることができる。
		List<Todo> todos = todoRepository.findAll();
		todos.sort(
			//あまり書かれないがこのように書くこともできる。
		    Comparator.comparing((Todo todo) -> todo.getPriority()).reversed()
		              .thenComparing((Todo todo)->todo.getDueDate())
		);
		//戻り値Listを忘れずに
		return todos;
	}
}
```

- 上記２つのソート処理は、コピーされてないので下記2つの書き方の方がよい。
## thenComparing
[Comparator#thenComparing (Java SE 21 Javadoc)](https://docs.oracle.com/javase/jp/21/docs/api/java.base/java/util/Comparator.html#thenComparing(java.util.Comparator))
[Comparator#reversed (Java SE 21 Javadoc)](https://docs.oracle.com/javase/jp/21/docs/api/java.base/java/util/Comparator.html#reversed())


# StreamAPI

```java
public class TodoService{
	private final TodoRepository todoRepository;
	public TodoService (TodoRepository todoRepository){
		this.todoRepository = todoRepository;
	}
	
	public List<Todo> getSortedTodos(){
		return todoRepository.findAll().stream()
		.sorted(Comparator.comparing(Todo::getCreateAt))
		.toList();
	}
}
```

## Strategy

```java
public List<Todo> sort(List<Todo> todos) {
	// SortStrategy 内で並び替えを完結させるため、防御的コピーを作成
	List<Todo> sorted = new ArrayList<>(todos);
	sorted.sort(Comparator.comparing(todo->todo.getPriority().ordinal()));
	return sorted;
}
```